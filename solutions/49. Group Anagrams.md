# 2025-01-04 200
>為何需要像「count[ord(char) - ord('a')] += 1」這樣寫，而不能直接用字母？

在 Python 中，`count[ord(char) - ord('a')] += 1` 這樣的寫法是為了將字母 `'a'` 到 `'z'` 映射到索引 `0` 到 `25`，而不是直接用字母作為索引。以下是詳細原因：

---

### 1. **陣列只能用整數索引，而不是字母**

Python 的列表（`list`）只能**用整數作為索引**，而不能直接使用字母。例如：
```python
count = [0] * 26  # 長度為 26 的陣列

# 錯誤的寫法
count['a'] += 1  # TypeError: list indices must be integers or slices, not str
```
這裡 `count` 是一個陣列，而 `'a'` 是字串類型，因此不能直接作為索引。

---
### 3. **為何不直接用字典？**

雖然我們可以使用 `dict` 來直接以字母作為鍵：
```python
count_dict = {}
for char in s:
    if char not in count_dict:
        count_dict[char] = 0
    count_dict[char] += 1
```
這樣雖然可行，**但字典會比列表佔用更多的空間**，尤其當**我們知道字母集固定**時，使用固定長度的列表更加高效。
○而且更難寫，也更難讀，就是這樣。
---
### 結論
`count[ord(char) - ord('a')] += 1` 這種方式是利用 ASCII 碼進行映射，實現快速定位，減少空間和時間成本。相較於使用字典，這種方法在處理固定字母集（如 `a-z`）時更高效，也符合競賽與面試的常見優化要求。


## 原則上使用 list 來計數字母出現次數是最佳選擇，偶爾用字典

在**統計字母出現次數**的問題中，使用列表作為字母計數的方法通常是最佳選擇，但需要考慮具體情境和限制，以下是詳細的分析：

## **示例比較**

### 異位詞檢查的兩種場景：
1. **小寫字母範圍（`a-z`）**
   - 使用 `count = [0] * 26` 列表，高效且空間佔用固定。

2. **全字符範圍（Unicode）**
   - 無法預測字符範圍大小，無法用固定長度列表，應使用字典：
   ```python
   count_dict = {}
   for char in s:
       count_dict[char] = count_dict.get(char, 0) + 1
   ```
---
## **如何選擇最佳方法？**

| **場景**                   | **建議方法** | **理由**                         |
| -------------------------- | ------------ | -------------------------------- |
| 固定範圍字母集（如 `a-z`） | 列表 `count` | 長度固定，查找與更新速度快       |
| 不固定或未知範圍的字符集   | 字典 `dict`  | 支援任意字符集，節省空間         |
| 字符種類極少、出現次數稀疏 | 字典 `dict`  | 只儲存出現過的字母，避免空間浪費 |
| 比較多組字母計數是否相等   | 列表 `count` | 轉元組後比較效率高於字典項目排序 |

---

## **結論**
- **如果字符範圍已知且固定（如小寫英文字母 `a-z`）**，使用固定長度的列表來計數是最好的選擇，因為它效率高且佔用空間少。
- **如果字符範圍不固定（如全 Unicode 或大寫字母等）**，則必須使用字典來記錄計數，因為列表無法涵蓋未知的字符種類數量。
- **如果出現次數稀疏**，使用字典來避免不必要的空間浪費會更好。

因此，**「一律使用列表」並不總是最佳選擇**，但在字母異位詞這類經典題型中，固定範圍的列表方法是最常見且高效的解法。
